<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bride Buddy - Choose Your Plan</title>
    <link rel="stylesheet" href="/css/styles-v2.css">
</head>
<body class="bg-gradient">
    <div class="screen">
        <div class="container">
            <h1 class="logo text-center mb-md">Bride Buddy</h1>
            <h2 class="text-white text-center mb-lg">Choose Your Plan</h2>
            <p class="text-white text-center mb-lg" style="opacity: 0.9;">Start your 7-day free trial. No credit card required!</p>
            
            <div class="pricing-container">
                <!-- VIP Plan -->
                <div class="pricing-card fade-in">
                    <h3 class="pricing-title">VIP</h3>
                    
                    <div class="pricing-price">
                        $12.99<span class="pricing-price-period">/month</span>
                    </div>
                    <div class="pricing-divider">or</div>
                    <div class="pricing-price">
                        $99<span class="pricing-price-period"> one-time</span>
                    </div>
                    
                    <ul class="pricing-features">
                        <li>Full wedding planning tools</li>
                        <li>Unlimited AI chat assistant</li>
                        <li>Unlimited partners & co-planners</li>
                        <li>Budget tracking</li>
                        <li>Guest management</li>
                        <li>Vendor coordination</li>
                        <li>Task management</li>
                    </ul>
                    
                    <button class="btn btn-primary btn-full" onclick="selectPlan('vip', 'monthly')">
                        Start Free Trial
                    </button>
                    <button class="btn btn-ghost btn-full mt-sm" onclick="selectPlan('vip', 'one_time')">
                        One-Time Payment
                    </button>
                </div>

                <!-- VIP + Bestie Plan -->
                <div class="pricing-card recommended fade-in" style="animation-delay: 0.1s;">
                    <span class="pricing-badge">Recommended</span>
                    
                    <h3 class="pricing-title">VIP + Bestie</h3>
                    
                    <div class="pricing-price">
                        $19.99<span class="pricing-price-period">/month</span>
                    </div>
                    <div class="pricing-divider">or</div>
                    <div class="pricing-price">
                        $149<span class="pricing-price-period"> one-time</span>
                    </div>
                    
                    <ul class="pricing-features">
                        <li>Everything in VIP</li>
                        <li>Separate Bestie interface</li>
                        <li>Bachelorette party planning</li>
                        <li>Bridal shower planning</li>
                        <li>Bridesmaid tracker</li>
                        <li>Payment tracking</li>
                        <li>Bestie AI chat assistant</li>
                    </ul>
                    
                    <button class="btn btn-primary btn-full" onclick="selectPlan('vip_bestie', 'monthly')">
                        Start Free Trial
                    </button>
                    <button class="btn btn-ghost btn-full mt-sm" onclick="selectPlan('vip_bestie', 'one_time')">
                        One-Time Payment
                    </button>
                </div>
            </div>
            
            <p class="text-white text-center mt-lg" style="opacity: 0.7; font-size: 0.875rem;">
                7-day free trial included. Cancel anytime. No surprises.
            </p>
        </div>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // Get wedding_id from URL
        const urlParams = new URLSearchParams(window.location.search);
        const weddingId = urlParams.get('wedding_id');
        
        if (!weddingId) {
            alert('No wedding ID found. Please complete onboarding first.');
            window.location.href = 'welcome-v2.html';
        }

        async function selectPlan(tier, billing) {
            try {
                // For now, skip payment and go straight to dashboard with trial
                // User can subscribe later via dashboard
                window.location.href = `dashboard-v2.html?wedding_id=${weddingId}&trial=true`;
                
                // Uncomment below when ready to integrate Stripe Checkout:
                /*
                const response = await fetch('/api/create-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        wedding_id: weddingId,
                        tier: tier,
                        billing: billing
                    })
                });
                
                const data = await response.json();
                
                if (data.url) {
                    window.location.href = data.url;
                } else {
                    throw new Error('No checkout URL returned');
                }
                */
            } catch (error) {
                console.error('Error selecting plan:', error);
                alert('Error processing your selection. Please try again.');
            }
        }
    </script>
</body>
</html>
